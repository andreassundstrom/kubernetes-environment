loki:
  loki:
    schemaConfig:
      configs:
      - from: "2025-06-22"
        store: tsdb
        object_store: azure
        schema: v13
        index:
          prefix: loki_index_
          period: 24h
    ingester:
      chunk_encoding: snappy
    tracing:
      enabled: true
    querier:
      max_concurrent: 4
    storage:
      type: azure
      azure:
        connectionString: "${AZURE_CONNECTION_STRING}"
      bucketNames:
        chunks: "chunks"
        ruler: "ruler"
        admin: "admin"
  deploymentMode: SimpleScalable
  
  backend:
    replicas: 2
    extraArgs:
    - '-config.expand-env=true'
    extraEnv:
    - name: AZURE_CONNECTION_STRING
      valueFrom:
        secretKeyRef: 
          name: azure-storage-secret
          key: connectionString
    persistence:
      # Disable use of PVC for write pods
      volumeClaimsEnabled: false
  read:
    replicas: 2
    extraArgs:
    - '-config.expand-env=true'
    extraEnv:
    - name: AZURE_CONNECTION_STRING
      valueFrom:
        secretKeyRef: 
          name: azure-storage-secret
          key: connectionString
  write:
    replicas: 3
    extraArgs:
    - '-config.expand-env=true'
    extraEnv:
    - name: AZURE_CONNECTION_STRING
      valueFrom:
        secretKeyRef: 
          name: azure-storage-secret
          key: connectionString
    persistence:
      # Disable use of PVC for write pods
      volumeClaimsEnabled: false
  minio:
    enabled: false